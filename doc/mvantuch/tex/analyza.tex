\chapter{Analýza}
\label{chap:analyza}
Projekt byl od začátku koncipován jako aktualizace stávajícícho řešení, do kterého budou promítnuty zkušenosti a znalosti nabyté za dobu jeho fungování zkombinované s moderními technologiemi, které nebyly v době vývoje předešlé verze ještě dostupné. Návrh klade výraz na minimalizaci možných uživatelských chyb a jednoduchost a názornost vytváření obsahu, čehož dosahuje za pomocí definování vztahů mezi obsahem a omezením možností úprav automatickým generováním prvků webu, jakými jsou například seznamy odkazů a tabulky propojených elementů.

\section{Existující řešení}
Při analýze bylo nutné zohlednit stávající řešení a možnosti jeho rozšíření. Existující portál využíval Drupal v 6. verzi, který byl již v dané době značně zastaralý a jeho rozšiřitelnost byla velmi omezená, či zbytečně komplikovaná. Řešení bylo rozšířeno řadou volně dostupných modulů, které dohromady poskytovaly komplexní strukturu nabídky menu vytvořenou namíru požadavkům fakulty. Tato struktura byla navržena v době, kdy nebylo známo, že systém bude pro zobrazování zákonů využívat externí software ASPI a proto byly tyto zákony také použity. 

Autentizace na server probíhala pouze za pomocí hesla měněného ve čtvrtletních cyklech a nebyla tím pádem nijak vázána na jednotlivé uživatele. Tento způsob nedovoloval prakticky žádnou kontrolu nad uživateli přistupujícími k obsahu a po získání hesla byl schopen na server přistupovat prakticky kdokoliv. 

\subsection{Struktura menu}

Menu v levé sekci stránky obsahuje všechny odkazy, které uživatelé využívají k navigaci skrze portál. 

\begin{itemize}
  \item \textbf{[název předmětu 1]} \hfill \\
    rozbalí/sbalí menu
  \begin{itemize}
    \item \textbf{[název předmětu 1]} \hfill \\
      odkaz na stránku předmětu, obsahující pouze název a informace o spolufinancování \gls{eu}
    \item \textbf{Studijní text} \hfill \\
      rozbalí/sbalí menu
      \begin{itemize}
        \item \textbf{Studijní text} \hfill \\
          odkaz na stránku studijní text, která je typicky prázdná
        \item \textbf{Úvod} \hfill \\
          odkaz na stránku obsahující typicky úvodní text k danému předmětu
        \item \textbf{[studijní text 1]} \hfill \\
          jeden z odkazů na stránku s obsahem přednášek, či jinak tématicky oddělených informací k předmětu
        \item \textbf{[studijní text 2]}
      \end{itemize}
    \item \textbf{Ostatní studijní materiály} \hfill \\
      tento a následující již nejsou pevně dané a vyskytují se nepravidelně pouze u některých předmětů
    \item \textbf{Prezentace}
    \item \textbf{Právní předpisy}            
    \item \textbf{Judikáty}
    \item \textbf{Procvičování}        
  \end{itemize}
  \item \textbf{[název předmětu 2]}
  \item \textbf{[název předmětu 3]}
\end{itemize}

Z výše popsané struktury menu vyplývá, že její vlastnosti nesplňují požadavky moderních informačních systémů. Odkazy mají nekonzistentní chování - buď se rozbalí pod-menu a nebo prohlížeč přejde na novou stránku a uživatel proto nemůže jednoduše vědět, jaké chování očekávat. Struktura také obsahuje duplicity (název předmětu a odkaz na studijní text se opakují a v obou případech znamená něco jiného). Není také určená společná struktura všech předmětů a tím může lehce dojít ke zmatení uživatelů, kteří musejí pokaždé informace hledat na jiném místě v závislosti na daném předmětu (stránky Ostatní studijní materiály, Prezentace, \dots). Některé stránky také místo agregace užitečných informací obsahují buď pouze banner, nebo jsou úplně prázdné (úvodní stránka předmětu) v místech, kde by uživatel očekával obsah.

\section{Použité technologie}
\label{sec:technologies}

Základními technologiemi jsou Drupal a Guacamole, které prakticky určují potřeby vyžití dalších technologií. Základem proto jsou programovaí jazyky PHP, JAVA a JavaScript a výstup je realizován pomocí HTML (v.4 a v.5) a CSS (v.2 a v.3). Ačkoliv bylo využito velké množství modulů, rozhodl jsem se zmínit pouze ty, které měly zásadní vliv buď na funkcionalitu, nebo na proces vývoje.

\subsection{Jádro CMS a přidružené technologie}

\subsubsection*{Drupal \hfill \emph{http://drupal.org}} 
\label{subsec:drupal}
Aktuálně světově třetí nejrozšířenější\cite{website:cms-market-share} systém pro správu obsahu (CMS), Drupal je založený na jazyce PHP klade důraz obzvláště na vývojáře a na možnosti úpravy stránek. Zatímco WordPress cílí na uživatelskou jednoduchost a většina stránek na něm postavných je lehce rozpoznatelná, Drupal je možné změnit od základu a jeho \gls{api} pro tvorbu modulů poskytuje jednoduché možnosti úprav. Systém je postavený na PHP, minimálně verze 5.3 a i když některé jeho části jsou již implementovány objektově, celkově převládá funkcionální přístup s množstvím propriétárních principů. Mezi ty patří například hook\_api, poskytující přípojné body pro další moduly a tím jednoduchou rozšiřitelnost, nebo systém vzorů (templates), které pomocí speciální jmenné konvence umožňují měnit výpis html kódu prvků webu.
Drupal také již v základu podporuje využití tzv. instalačních profilů. Jedná se o speciální moduly neposkytující samy o sobě žádnou funkcionalitu, ale sdružující informace o potřebných modulech a jejich iniciálním nastavení. To lze využít pro specifické distribuce, například vícejazyčná instalace, instalace specializovaná na organizace, výkon a podobně.

\subsubsection*{Kerberos (Protocol) \hfill \emph{http://web.mit.edu/kerberos}}
Vyvinut na Massachusettském technologickém institutu (MIT), protokol Kerberos poskytuje autentizační funkcionalitu za pomocí symetrické kryptografie (jediný klíč je použit pro šifrování i dešifrování). Autentizace je provedena za pomoci důvěryhodného třetího serveru (v tomto případě IS MUNI).

\subsubsection*{Omega (Drupal Theme) \hfill \emph{http://drupal.org/project/omega}}
\label{subsec:omega}
Pro Drupal existuje nespočet témat vzhledu, které se starají o formátování výstupu html kódu a s ním spojených kaskádových stylů (css). Projekt Omega je zaměřen na \gls{responsive} a poskytuje hotovou implementaci různých stylů pro různá zobrazovací zařízení. Zatímco třetí verze poskytuje komplexní administrační rozhraní, přístup čtvrté verze se spíše zaměřil na implementaci v kódu. Za pomocí SUSY jsou zapsány poměry mezi bloky zobrazenými na stránce a ty se pak při využití knihovny Breakpoints\cite{website:breakpoints} mezi sebou přepínají.

\subsubsection*{SASS - Syntactically Awesome Style Sheets \hfill \emph{http://sass-lang.com/}}
\label{subsec:sass}
Při využití tématu vzhledu Omega se automaticky nabídla možnost využití knihovny SASS pro generování kaskádových stylů. Namísto použití klasického CSS je kód napsán ve formátu SCSS a poté zkompilován do CSS. Tento přístup přináší bezproblémovou kompatibilitu se všemi prohlížeči doplněnou o rozšířené možnosti definice pravidel, jako je využití proměnných, vnoření pravidel, in-line import a další. Kromě výrazného vylepšení čitelnosti, možnosti seskupováni pravidel bez zvyšování zátěže na přenos dat tak lehce lze dosáhnout i snížení programátorské náročnosti.

\subsubsection*{COMPASS \hfill \emph{http://compass-style.org/}}
\label{subsec:compass}
Soubory SASS musí být kompilovány do CSS pro zobrazení prohlížečem a protože manuální kompilace je časově náročná a náchylná k opomenutí, nabízí se využití programu COMPASS. Přestože poskytuje širokou škálu funkcionality určené pro ulehčení práce designérům, pro potřeby tohoto projektu byla využita pouze automatická konverze z SCSS do CSS dle definovaných pravidel za pomocí compass watch. Po spuštění démona jsou kontrolovány všechny změny ve složce a automaticky regenerovány výstupní CSS soubory pro načtení prohlížečem.

\subsubsection*{SUSY \hfill \emph{http://susy.oddbird.net/}}
\label{subsec:susy}
Další technologií využitou v tématu vzhledu je SUSY - implementace responsivní mřížky pro Compass. Za pomocí jednoduchých pravidel lze nadefinovat rozdílné rozvržení stránky závisející na rozlišení zobrazovacího zařízení. Například monitoru počítače s rozlišením vyšším než 1024 bodů můžeme postranní panel zobrazit nalevo, zatímco na mobilním zařízením můžeme text zmenšit a zobrazit v horní části stránky spolu s vypuštěním některých nedůležitých bloků. Celá stránka je může být rozdělena na počet sloupců, které mohou být dynamicky vyplňovány a pravidla lze velmi jednoduše zapisovat bez nutnosti řešení problémů s kompatibilitou mezi prohlížeči.

\subsection{Technologie připojení ke vzdálené ploše}

\subsubsection*{Guacamole \hfill \emph{http://guac-dev.org/}}
\label{subsec:guacamole}
Jak je popsáno na stránkách této knihovny, jedná se o implementaci myšlenky o připojení ke vzdálené ploše skrze webový prohlížeč. Namísto potřeby instalace speciálního klienta, či využití existujícího systémového klienta, je možné používat jakýkoliv prohlížeč podporující některé z technologií HTML5, jako je canvas. Připojení probíhá skrze proxy server implementovaný v jazyce C, který zprostředkovává vlastní připojení. Ke klientovi putují již jen obrazová data a povely, obojí je zakódováno v proprietárním protokolu umožňujícím snížit odezvu obrazu a dekódovat jej v průběhu přijímání dat. Postup komunikace mezi klientským prohlížečem a vzdálenou plochou je blíže vyobrazen na diagramu \ref{fig:arch_core}.

Propojení mezi webovým prohlížečem a proxy serverem je provedeno za pomocí standatních AJAX požadavků v jazyce JavaScript, zatímco propojení z proxy dále podporuje protokoly SSH, VNC a RDP.

\begin{figure}[htp] 
  \centering{\includegraphics[width=12cm]{img/architecture-core-crop.pdf}}
  \caption{Základní architektura komunikace se vzdálenou plochou}
  \label{fig:arch_core}
\end{figure}  

\subsubsection*{CORS \hfill \emph{http://www.w3.org/TR/cors/}} 
Kvůli bezpečnostním rizikům je JavaScriptu běžícímu v prohlížeči zakázáno přistupovat k jiným doménám, tento přístup se nazývá Same-origin policy a slouží k zamezení podvodných stránek a zvýšení internetové bezpečnosti. Veškeré požadavky směřující na jinou doménu tak musejí být vykonávány přímo ze serveru, což je často zbytečně náročné a v dnešní době je občas nutné tato omezení obejít. K tomu slouží \gls{cors}~\cite{cors}, kdy za pomocí HTML hlaviček přidaných do komumnikace mezi serverem a prohlížečem je umožněna komunikace s jinými doménami. Pokud server odešle zpět hlavičku Access-Control-Allow-Origin: [doména], prohlížeč ji zanalyzuje a případně umožní komunikaci. K tomuto je nutné využít XMLHttpRequest (XDomainRequest v případě \gls{ie}) s attributem WithCredentials, o zbytek se postará prohlížeč se serverem a komunikace funguje stejně jako v případě klasických požadavků.

\subsubsection*{ASPI \hfill \emph{http://www.systemaspi.cz/}}
Systém aspi poskytuje jeho uživatelům komplexní právní informace z prostředí České republiky. Velký důraz je kladen na možnost jednoduchého vyhledávání a verzování obsahu, stejně jako dostupnost skrze většinu operačních systémů. ASPI funguje jako aplikace instalovaná na klientském prostředí, ale nabízí také možnost vytvoření serverů dostupných k připojení skrze vzdálenou plochu, čehož je využito v případě tohoto projektu.

\subsection{Podpora nasazení a vývoje projektu}

\subsubsection*{Drush \hfill \emph{http://github.com/drush-ops/drush}}
\label{subsec:drush}
Pro ulehčení administračních úkonů nad instalací Drupalu byl komunitou vyvinut program Drush, poskytující administrační rozhraní nad Drupalem v terminálové konzoli. V základu jsou poskytovány operace nad moduly a tématy vzhledu, kdy každý z modulů může pomocí implementace funkcí v souboru .drush.inc poskytnout vlastní příkazy.

\subsubsection*{Phing \hfill \emph{http://www.phing.info/}}
\label{subsec:phing}
Phing je nástroj určený ulehčení \gls{deployment} a nastavení PHP projektů, fungující na bázi XML konfiguračního souboru. Je založený na podobné myšlence jako Apache ANT, který poskytuje podobnou funkcionalitu pro jazyk JAVA. V konfiguračním souboru lze definovat pravidla, proměnné a závislosti vedoucí k doručení projektu, jeho kontrolám, či automatizaci jakýchkoliv dalších akcí, potřebných k správnému chodu webové aplikace.

\subsubsection*{DrushTask \hfill \emph{https://drupal.org/project/phingdrushtask}}
Phing povoluje vývoj vlastních operací (task), čehož tento projekt využívá. Za pomoci příkazu TaskdefTask~\cite{website:phing-user-guide} je definovaná operace <drush> poskytující rozhraní k programu Drush. Tím je umožněno automatizovat většinu administrátorských operací nad projektem a případně implementovat automatickou analýzu kódu a testování pomocí \gls{ci}.

\subsubsection*{Maven \hfill \emph{http://maven.apache.org/}}
Podobně jako Phing pro PHP, Maven poskytuje automatizaci \gls{deployment} JAVA projektů (převážně). Jako základ také používá Apache ANT, který rozšiřuje a specializuje se na možnost znovuvyužití skriptů pro více projektů. 

\subsubsection*{Team City \hfill \emph{http://www.jetbrains.com/teamcity/}}
Podobně jako komunitou často využívaný Jenkins či Hudson, Teamcity je implementaci \gls{ci} serveru. V tomto případě však jde o čistě komerční produkt, který je ale pro malé projekty dostupný zcela zdarma (je omezen na počet projektů). Team City umožňuje komplexní nastavení projektů a jednotlivých úkonů, kontrolujících zdrojový kód, nebo provádějících operace \gls{deployment} na produkční prostředí. Je také poskytována integrace s většinou moderních \gls{cvs}.

\subsubsection*{GitHub \hfill \emph{https://github.com/}}
\label{subsec:github}
Pro udržování historie kódu a pro spolupráci více autorů byla vybrána technologie Git a online portál GitHub, který pro ni poskytuje jednoduchou instalaci a online správu uložiště. Všechny úpravy mohou být jednoduše zobrazeny přímo v prohlížečí a provázány s úkoly vytvořenými v úkolovém managementu na stejném internetovém portálu. 

\section{Architektura připojení ke vzdálené ploše}
Základně poskytuje Guacamole komplexní řešení na propojení ke vzdálené ploše včetně stránky pro management uživatelů, kde každý z nich si může pro sebe vytvořit své vlastní připojení, u každého z nich se zobrazuje náhled a podobně. Jak je zobrazeno na diagramu \ref{fig:arch_guacamole}, součástí Guacamole je i webová aplikace v jazyce HTML, která implementuje knihovnu Guacamole-js a tím i komunikaci s JAVA Servletem. Pro potřeby tohoto projektu však bylo nutné tyto JavaScriptové knihovny převzít a implementovat do modulu pro Drupal. 

\begin{figure}[htp] 
  \centering{\includegraphics[width=12cm]{img/architecture-guacamole-crop.pdf}}
  \caption{Neupravená architektura a rozčlenění řešení}
  \label{fig:arch_guacamole}
\end{figure}  

Díky skutečnosti, že již nutně neběží JAVA Server a JAVA EE Web aplikace na stejném serveru, či url, bylo nutné změnit architekturu AJAXových požadavků. Ty totiž musejí v typickém případě být zasílány pouze na stejnou doménu kvůli prevenci \gls{xss}. Pro vyřešení tohoto problému byla změněna implementace na CORS požadavky, k čemuž musel být uzpůsoben i JAVA Servlet kontejner, u kterého musely být povoleny požadavky z dané domény. 

Uživatel proto pracuje základně pouze s portálem postaveném na Drupalu, do kterého byl přidán modul implementující stránku určenou ke komunikaci s Guacamole Servlet kontejnerem za pomoci upravené JavaScriptové knihovny Guacamole-js, jak je vyobrazeno na diagramu \ref{fig:arch_drupal}.

\begin{figure}[htp] 
  \centering{\includegraphics[width=12cm]{img/architecture-drupal-crop.pdf}}
  \caption{Architektura přizpůsobená pro portál ESF}
  \label{fig:arch_drupal}
\end{figure}  

\section{Struktura portálu v prostředí Drupalu}

V Drupalu je využíváno několika základních ,,stavebních kamenů'', každý z nich může dle svého typu hluboce modifikován a přizpůsoben každému řešení. Základem jsou entity, uložené v databázi poskytují možnosti přidávání polí, podobně jako sloupců v databázi. Entity jsou několika moduly jádra Drupalu rozšířeny a poskytují funkcionalitu potřebnou k vytvoření webových stránek. Jmenovitě se jedná o uzly (node), které nám poskytují jednotlivé stránky a mají svou unikátní url adresu, a slovníky (taxonomy), které slouží ke kategorizaci obsahu a vytváření polí založených na výběru z dostupných prvků. Uzly i slovníky mohou být konfigurovány ve formě druhů obsahu, každý z nich s vlastními polemi nezávislými na ostatních entitách. Pole se stejným obsahem však mohou být sdílena pro ulehčení databázové struktury, do ktére se data reálně ukládají. Instance dostupných typů obsahu pak dostanou přidělené unikátní číslo v rámci všech entit, které určuje její data v databázi. Ne všechna pole musejí být zobrazena na stránce entity, nebo může pro jejich zobrazení být využito speciálních formátovacích technik, jako tabulek, či jiných výpisů.

Pro umístění obsahu na stránkách se využívají bloky (block), které lze přímo v UI umístit do předdefinovaných segmentů stránek (ty jsou definované v konfiguračních souborech tématu vzhledu viz. kapitola \ref{chap:implementace-drupal}).

Požadavky \cite{omaterna2013} poskytnuté Mgr. Maternou poskytují analýzu řešení, kterou však bylo potřeba aplikovat přímo na možnosti Drupalu a co nejvíce využít jeho možností - jednak pro samotnou implementaci řešení, ale také pro maximální ulehčení administrace a poskytnutí co nejvyšší míry soudržnosti skrze finální řešení projektu. Toho je dosáhnuto omezením vstupu a poskytnutím výběru z předdefinovaných možností (pokud je tento způsob řešení možný).

\subsection{Typy polí použitelné pro vlastnosti typů obsahu}
V drupalu existuje několik základních typů polí, které převážně fungují podobně jako datové typy v typických programovacích jazycích. Narozdíl od jednoduchých datových typů však poskytují navíc html formátování a mohou poskytovat i další nastavení. Formátování jde dále změnit pomocí přepsání základních formátovácích funkcí.

\begin{description}
  \item[Text] Poskytuje pole pro text s omezenou délkou bez možnosti vkládání html značek. Jeho obsah je zadáván pouze v jediném řádku a poskytuje pouze limitované možnosti nastavení, kterými je délka vstupního pole, či defaultní hodnota. 
  
  \item[Dlouhý text se souhrnem] Narozdíl od typu pole Text může v tomto případě být text neomezeně dlouhý a obsahovat značky html kódu. Ty mohou být vkládány buď ručně a nebo automaticky formátovány pomocí \gls{wysiwyg} editoru. Zároveň je pro text možné vyplnit souhrn, který je ve specifických případech zobrazit, nebo se automaticky zobrazí zkrácená verze textu. Počet znaků je možné určit pro každou instanci pole zvlášť.
  
  \item[Hodnota slovníku] V nastavení pole lze vybrat jeden z existujících slovníků. Jeho hodnoty pak jsou vypsány v jednom z dostupných formátů (radio/zaškrtávací tlačítka) a dle nastavení pak lze vybrat jen jedna, nebo více možností.
  
  \item[Logická hodnota] Poskytuje pole pro logickou hodnotu - ano nebo ne. Pro hodnoty lze vybrat jednu z typicky použítelných nápisů (ano/ne, pravda/nepravda, checkmark/x), nebo definovat nápisy vlastní. 

  \item[URL adresa] Kromě samotné adresy poskytuje možnost uložení dalších parametrů, podobně jako element <a> jazyka html. Mezi tyto parametry patří např. titulek, cíl a podobně.

  \item[Média] Pro vkládání médií do systému je využit modul Media, který přidává komplexní řešení pro vkládání jakéhokoliv obsahu. Je možné vkládat dokumenty, soubory pdf, zvuk, obraz, či video a všechny tyto typy obsahu jsou uživately poskytovány v jednotném formátu.
  
  \item[Váha] I když by se pro určení váhy produktu dalo využít jednoduchého číselného pole, jeden z rozšiřujících modulů poskytuje jednak speciálně využitelné pole pro výběr hodnoty a také pohledy na obsah a řadící funkce, které celou implementaci značně ulehčují.
  
  \item[Odkaz na entitu] Důležitou vlastností většiny systémů je možnost propojení entit. Pro modelování těchto vztahů zde existuje typ pole odkaz na entitu, u kterého je možné vybrat typy entity, na které je daný typ obsahu navázán a způsob propojení. Za pomocí extra modulů lze také možné modelovat místo jednoduché asociace kompozici. V tom případě při smazání nadentity jsou smazány i všechny podentity. Lze také definovat, zda je možné pouze vytvářet nové podentity, či přidávat ty již existující.
\end{description}

\subsection{Typy entity}
\label{subsec:typy-entiy}
Kdybychom si představili typy obsahu ve světě objektově orientovaného programování, všechny by dědily vlastnosti ze základní třídy \emph{Entita}. Těmito vlastnostmi jsou typ, ID a několik dalších důležitých pouze pro interní fungování redakčního systému. Z \emph{Entity} dědí třída \emph{Uzel}, která ji rozšiřuje o nadpis, adresu a stav. Pro lepší představu jsou vztahy popsány na diagramu \ref{fig:class-diagram}. Přímý předek typu obsahu je vždy zapsán v závorce za jeho názvem.

\begin{description}
  \item[Uzel] Stránka mající vlastní \gls{url} a obsah.
  \item[Položka] Entita s nadpisem použitelná pro další rozšíření.
  \item[Osoba] Entita použitelná pro osobu, obsahující pole pro vložení jména.
\end{description}

\subsection{Typy obsahu}
\label{subsec:typy-obsahu}

\begin{figure}[htp] \centering{
\includegraphics[width=12cm]{img/class-diagram-crop.pdf}}
\caption{Diagram tříd CMS systému}
\label{fig:class-diagram}
\end{figure}  

\begin{description}
  \item[Novinka \emph{(uzel)}] Na stránkách jsou publikovány novinky (aktuality) týkající se buď portálu samotného, fakulty ESF, či jakýchkoliv dalších relevantních událostí. Novinky jsou zobrazovány na úvodní stránce. 
  
  \item[Předmět \emph{(uzel)}] Popisuje předmět vyučovaný v rámci fakulty ESF a tím vyjadřuje základní rozdělení celého portálu a slučuje hlavní část informací, o které se návštěvníci zajímají. Na stránce detailu předmětu je zobrazen ktátký popis, za kterým následuje tabulka se seznamem studijních textů a k nim vztahujících se materiálů. Materiály, které se vztahují přímo k předmětu jsou zobrazeny samostatně a celá stránka je uzavřana seznamem oborů, které se k danému předmětu vztahují.

  \item[Obor práva \emph{(uzel)}] Předměty se mohou vztahovat k určitým oborům práva. Zatímco některé z nich se mohou dotýkat pouze jednoho z nich, jiné se mohou dotýkat všech. Proto je důležité tento vztah být vymodelovat a uživatelům poskytnout možnost se v tomto jednoduše orientovat a přecházet mezi obsahem, který jej právě zajímá. Na stránce oboru práva je zobrazen popis oboru a tabulka se seznamem předmětů, které se k němu vztahují.

  \item[Studijní text \emph{(uzel)}] Studijní text obsahuje informace vztahující se k jednomu celku výuky, typicky k jedné přednášce. Lze definovat zkrácený cíl přednášky, přidat k ní materiály a určit její pořadové číslo. U všech materiálů je vhodné zadat název pro správné zobrazení v tabulce detailu předmětu, na kterém se zobrazuje seznam těchto entit.

  \item[Příběh \emph{(uzel)}] Pro odreagování studentů je v jednom ze segmentů stránek zobrazován příběh z právního prostředí. 

  \item[Vtip \emph{(položka)}] V postranním panelu lze zobrazit vždy aktuální vtip z právního prostředí, který také slouží k odreagování studentů. 

  \item[Vyučující \emph{(osoba)}] Entita popisující vyučujícího působícího na fakultě.
\end{description}

\subsection{Slovníky}

Pro kategorizaci a pro výběr možností bylo v požadavcích identifikováno několik slovníků. Díky vztahu k entitě (slovník také dědí vlastnosti entity) může také pro své hodnoty definovat pole a tím rozšířit jejich funkcionalitu a množství informací.

\subsubsection*{Stupeň obecnosti}
Pro řazení oborů je potřeba uložit jejich obecnost, která je vyjádřena v několika stupních, které mohou být v případě potřeby rozšířeny. Každé entitě může být přiřazen jeden stupeň obecnosti.

\begin{list}{-}{Pole}
  \item Váha (váha) \hfill \\
    číselná hodnota použitelná k řazení
\end{list}

\begin{list}{-}{Hodnoty}
  \item Velmi obecný \emph{(váha = 0)} 
  \item Středně obecný \emph{(váha = 1)}
  \item Málo obecný \emph{(váha = 2)}
\end{list}

\subsubsection*{Ročník}
Pro případné budoucí úpravy systému, či filtrování, je vhodné u předmětu vyplnit i ročník, ve kterém je vyučován. S ohledem na opakování předmětů může každé entitě přiřazeno neomezené množství ročníků (i žádný). 

\begin{list}{-}{Hodnoty}
  \item 2012/13
  \item 2013/14
  \item 2014/15
\end{list}

\section{Struktura zdrojových souborů}

\begin{itemize}
  \item \textbf{doc/} \hfill \\
    dokumentace projektu
  \begin{itemize}
    \item \textbf{mvantuch/} \hfill \\
      zdrojové kóody pro generování dokumentace projektu v 
    \item \textbf{omaterna/} \hfill \\
      práce Mgr. Ondřeje Materny určená pro referenci
  \end{itemize}
  \item \textbf{phing/} \hfill \\
    soubory určené k podpoře \gls{deployment} pomocí nástroje Phing
  \item \textbf{ref/} \hfill \\
    referenční soubory, design a pod.
  \item \textbf{src/} \hfill \\
    zdrojové kódy jednotlivých částí projektu
    \begin{itemize}
      \item \textbf{main/} \hfill \\
        aplikace Guacamole upravená pro potřeby tohoto projektu
      \item \textbf{modules/} \hfill \\
        moduly \gls{cms} Drupal vyvinuté speciálně pro tento projekt, nebo exportované za pomoci modulu Features (kapitola~\ref{subsec:features})
      \item \textbf{profiles/} \hfill \\
        instalační profil pro Drupal, definující veřejně dostupné moduly, potřebné k chodu
      \item \textbf{themes/} \hfill \\
       téma vzhledu projektu
    \end{itemize}
  \item \emph{build.xml} \hfill \\
    xml soubor obsahující instrukce pro nástroj Phing k operacím nad instalací Drupalu
  \item \emph{pom.xml} \hfill \\
    xml soubor s projektem Maven, kontrolujícím Guacamole část projektu
  \item \emph{esf.make} \hfill \\
    make skript pro příkaz Drush make
  \item \emph{INSTALL.md} \hfill \\
    markdown soubor s instalačními instrukcemi
  \item \emph{README.md} \hfill \\
    markdown soubor se všeobecnou nápovědou
\end{itemize}
